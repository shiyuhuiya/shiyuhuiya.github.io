<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0,viewport-fit=cover"><title>微信小程序 | 三叶的博客</title><meta name="author" content="三叶sanye"><meta name="copyright" content="三叶sanye"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#ffffff"><meta name="description" content="微信小程序有自己开发框架，并且和我们熟悉的vue或者react框架的语法，api区别还是蛮大的，学习成本不低，个人不推荐花太多时间去学习，更推荐uni-app（使用vue的语法开发web应用并多端发布）这类的框架，使用我们熟悉的框架语法开发，还能轻松实现多端发布。当然，wx小程序的知识中也有许多是通用的。  说说你对微信小程序的理解？优缺点？是什么2017年，微信正式推出了小程序，允许外部开发者">
<meta property="og:type" content="article">
<meta property="og:title" content="微信小程序">
<meta property="og:url" content="https://www.sanye.blog/posts/4618cb0a.html">
<meta property="og:site_name" content="三叶的博客">
<meta property="og:description" content="微信小程序有自己开发框架，并且和我们熟悉的vue或者react框架的语法，api区别还是蛮大的，学习成本不低，个人不推荐花太多时间去学习，更推荐uni-app（使用vue的语法开发web应用并多端发布）这类的框架，使用我们熟悉的框架语法开发，还能轻松实现多端发布。当然，wx小程序的知识中也有许多是通用的。  说说你对微信小程序的理解？优缺点？是什么2017年，微信正式推出了小程序，允许外部开发者">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://www.sanye.blog/images/cover/violet.png">
<meta property="article:published_time" content="2025-01-21T03:15:56.000Z">
<meta property="article:modified_time" content="2025-02-12T05:27:23.773Z">
<meta property="article:author" content="三叶sanye">
<meta property="article:tag" content="微信小程序">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://www.sanye.blog/images/cover/violet.png"><link rel="shortcut icon" href="/img/favicon.ico"><link rel="canonical" href="https://www.sanye.blog/posts/4618cb0a.html"><link rel="preconnect" href="//unpkg.com"/><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://unpkg.com/@fortawesome/fontawesome-free/css/all.min.css"><link rel="stylesheet" href="https://unpkg.com/node-snackbar/dist/snackbar.min.css" media="print" onload="this.media='all'"><script>
    (() => {
      
    const saveToLocal = {
      set: (key, value, ttl) => {
        if (!ttl) return
        const expiry = Date.now() + ttl * 86400000
        localStorage.setItem(key, JSON.stringify({ value, expiry }))
      },
      get: key => {
        const itemStr = localStorage.getItem(key)
        if (!itemStr) return undefined
        const { value, expiry } = JSON.parse(itemStr)
        if (Date.now() > expiry) {
          localStorage.removeItem(key)
          return undefined
        }
        return value
      }
    }

    window.btf = {
      saveToLocal,
      getScript: (url, attr = {}) => new Promise((resolve, reject) => {
        const script = document.createElement('script')
        script.src = url
        script.async = true
        Object.entries(attr).forEach(([key, val]) => script.setAttribute(key, val))
        script.onload = script.onreadystatechange = () => {
          if (!script.readyState || /loaded|complete/.test(script.readyState)) resolve()
        }
        script.onerror = reject
        document.head.appendChild(script)
      }),
      getCSS: (url, id) => new Promise((resolve, reject) => {
        const link = document.createElement('link')
        link.rel = 'stylesheet'
        link.href = url
        if (id) link.id = id
        link.onload = link.onreadystatechange = () => {
          if (!link.readyState || /loaded|complete/.test(link.readyState)) resolve()
        }
        link.onerror = reject
        document.head.appendChild(link)
      }),
      addGlobalFn: (key, fn, name = false, parent = window) => {
        if (!false && key.startsWith('pjax')) return
        const globalFn = parent.globalFn || {}
        globalFn[key] = globalFn[key] || {}
        globalFn[key][name || Object.keys(globalFn[key]).length] = fn
        parent.globalFn = globalFn
      }
    }
  
      
      const activateDarkMode = () => {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#0d0d0d')
        }
      }
      const activateLightMode = () => {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#ffffff')
        }
      }

      btf.activateDarkMode = activateDarkMode
      btf.activateLightMode = activateLightMode

      const theme = saveToLocal.get('theme')
    
          const mediaQueryDark = window.matchMedia('(prefers-color-scheme: dark)')
          const mediaQueryLight = window.matchMedia('(prefers-color-scheme: light)')
          
          if (theme === undefined) {
            if (mediaQueryLight.matches) activateLightMode()
            else if (mediaQueryDark.matches) activateDarkMode()
            else {
              const hour = new Date().getHours()
              const isNight = hour <= 6 || hour >= 18
              isNight ? activateDarkMode() : activateLightMode()
            }
            mediaQueryDark.addEventListener('change', () => {
              if (saveToLocal.get('theme') === undefined) {
                e.matches ? activateDarkMode() : activateLightMode()
              }
            })
          } else {
            theme === 'light' ? activateLightMode() : activateDarkMode()
          }
        
      
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        document.documentElement.classList.toggle('hide-aside', asideStatus === 'hide')
      }
    
      
    const detectApple = () => {
      if (/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)) {
        document.documentElement.classList.add('apple')
      }
    }
    detectApple()
  
    })()
  </script><script>const GLOBAL_CONFIG = {
  root: '/',
  algolia: undefined,
  localSearch: {"path":"/search.xml","preload":false,"top_n_per_article":1,"unescape":false,"languages":{"hits_empty":"未找到符合您查询的内容：${query}","hits_stats":"共找到 ${hits} 篇文章"}},
  translate: {"defaultEncoding":2,"translateDelay":0,"msgToTraditionalChinese":"繁","msgToSimplifiedChinese":"簡"},
  highlight: {"plugin":"highlight.js","highlightCopy":true,"highlightLang":true,"highlightHeightLimit":false,"highlightFullpage":false,"highlightMacStyle":false},
  copy: {
    success: '复制成功',
    error: '复制失败',
    noSupport: '浏览器不支持'
  },
  relativeDate: {
    homepage: false,
    post: false
  },
  runtime: '',
  dateSuffix: {
    just: '刚刚',
    min: '分钟前',
    hour: '小时前',
    day: '天前',
    month: '个月前'
  },
  copyright: undefined,
  lightbox: 'null',
  Snackbar: {"chs_to_cht":"已切换为繁体中文","cht_to_chs":"已切换为简体中文","day_to_night":"已切换为深色模式","night_to_day":"已切换为浅色模式","bgLight":"#49b1f5","bgDark":"#1f1f1f","position":"bottom-center"},
  infinitegrid: {
    js: 'https://unpkg.com/@egjs/infinitegrid/dist/infinitegrid.min.js',
    buttonText: '加载更多'
  },
  isPhotoFigcaption: false,
  islazyload: false,
  isAnchor: false,
  percent: {
    toc: true,
    rightside: false,
  },
  autoDarkmode: true
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = {
  title: '微信小程序',
  isPost: true,
  isHome: false,
  isHighlightShrink: false,
  isToc: true,
  isShuoshuo: false
}</script><link rel="stylesheet" href="/css/bilibiliBanner.css"  media="defer" onload="this.media='screen'"><link rel="stylesheet" href="/css/mouse.css"><link rel="stylesheet" href="/css/time.css"><link rel="stylesheet" href="/css/iconfont.css"><meta name="generator" content="Hexo 7.3.0"></head><body><div id="loading-box"><div class="loading-left-bg"></div><div class="loading-right-bg"></div><div class="iron-container iron-circle"><div class="iron-box1 iron-circle iron-center"></div><div class="iron-box2 iron-circle iron-center"></div><div class="iron-box3 iron-circle iron-center"></div><div class="iron-box4 iron-circle iron-center"></div><div class="iron-box5 iron-circle iron-center"></div><div class="iron-box6 iron-circle"><div class="iron-coil" style="--i: 0"></div><div class="iron-coil" style="--i: 1"></div><div class="iron-coil" style="--i: 2"></div><div class="iron-coil" style="--i: 3"></div><div class="iron-coil" style="--i: 4"></div><div class="iron-coil" style="--i: 5"></div><div class="iron-coil" style="--i: 6"></div><div class="iron-coil" style="--i: 7"></div></div></div></div><script>(()=>{
  const $loadingBox = document.getElementById('loading-box')
  const $body = document.body
  const preloader = {
    endLoading: () => {
      $body.style.overflow = ''
      $loadingBox.classList.add('loaded')
    },
    initLoading: () => {
      $body.style.overflow = 'hidden'
      $loadingBox.classList.remove('loaded')
    }
  }

  preloader.initLoading()
  window.addEventListener('load', preloader.endLoading)

  if (false) {
    btf.addGlobalFn('pjaxSend', preloader.initLoading, 'preloader_init')
    btf.addGlobalFn('pjaxComplete', preloader.endLoading, 'preloader_end')
  }
})()</script><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="avatar-img text-center"><img src="/images/%E4%B8%89%E5%8F%B6.png" onerror="onerror=null;src='/img/friend_404.gif'" alt="avatar"/></div><div class="site-data text-center"><a href="/archives/"><div class="headline">文章</div><div class="length-num">20</div></a><a href="/tags/"><div class="headline">标签</div><div class="length-num">25</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">10</div></a></div><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 主页</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> 标签</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> 分类</span></a></div></div></div></div><div class="post" id="body-wrap"><header class="post-bg" id="page-header" style="background-image: url(/images/cover/forest2.png);"><nav id="nav"><span id="blog-info"><a class="nav-site-title" href="/"><span class="site-name iconfont icon-sanyecao">三叶的博客</span></a><a class="nav-page-title" href="/"><span class="site-name iconfont icon-sanyecao">微信小程序</span></a></span><div id="menus"><div id="search-button"><span class="site-page social-icon search"><i class="fas fa-search fa-fw"></i><span> 搜索</span></span></div><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 主页</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> 标签</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> 分类</span></a></div></div><div id="toggle-menu"><span class="site-page"><i class="fas fa-bars fa-fw"></i></span></div></div></nav><div id="post-info"><h1 class="post-title">微信小程序<a class="post-edit-link" href="https://github.com/shiyuhuiya/shiyuhuiya.github.io/issues_posts/微信小程序.md" rel="external nofollow noreferrer" title="编辑" target="_blank"><i class="fas fa-pencil-alt"></i></a></h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="far fa-calendar-alt fa-fw post-meta-icon"></i><span class="post-meta-label">发表于</span><time class="post-meta-date-created" datetime="2025-01-21T03:15:56.000Z" title="发表于 2025-01-21 11:15:56">2025-01-21</time><span class="post-meta-separator">|</span><i class="fas fa-history fa-fw post-meta-icon"></i><span class="post-meta-label">更新于</span><time class="post-meta-date-updated" datetime="2025-02-12T05:27:23.773Z" title="更新于 2025-02-12 13:27:23">2025-02-12</time></span><span class="post-meta-categories"><span class="post-meta-separator">|</span><i class="fas fa-inbox fa-fw post-meta-icon"></i><a class="post-meta-categories" href="/categories/%E5%BE%AE%E4%BF%A1%E5%B0%8F%E7%A8%8B%E5%BA%8F/">微信小程序</a></span></div><div class="meta-secondline"><span class="post-meta-separator">|</span><span class="post-meta-wordcount"><i class="far fa-file-word fa-fw post-meta-icon"></i><span class="post-meta-label">总字数:</span><span class="word-count">8k</span><span class="post-meta-separator">|</span><i class="far fa-clock fa-fw post-meta-icon"></i><span class="post-meta-label">阅读时长:</span><span>27分钟</span></span><span class="post-meta-separator">|</span><span class="post-meta-pv-cv" id="" data-flag-title=""><i class="far fa-eye fa-fw post-meta-icon"></i><span class="post-meta-label">浏览量:</span><span id="busuanzi_value_page_pv"><i class="fa-solid fa-spinner fa-spin"></i></span></span></div></div></div></header><main class="layout" id="content-inner"><div id="post"><article class="container post-content" id="article-container"><div id="post-outdate-notice" data="{&quot;limitDay&quot;:365,&quot;messagePrev&quot;:&quot;It has been&quot;,&quot;messageNext&quot;:&quot;days since the last update, the content of the article may be outdated.&quot;,&quot;postUpdate&quot;:&quot;2025-02-12 13:27:23&quot;}" hidden></div><blockquote>
<p>微信小程序有自己开发框架，并且和我们熟悉的vue或者react框架的语法，api区别还是蛮大的，学习成本不低，个人不推荐花太多时间去学习，更推荐uni-app（使用vue的语法开发web应用并多端发布）这类的框架，使用我们熟悉的框架语法开发，还能轻松实现多端发布。当然，wx小程序的知识中也有许多是通用的。</p>
</blockquote>
<h2 id="说说你对微信小程序的理解？优缺点？"><a href="#说说你对微信小程序的理解？优缺点？" class="headerlink" title="说说你对微信小程序的理解？优缺点？"></a>说说你对微信小程序的理解？优缺点？</h2><h3 id="是什么"><a href="#是什么" class="headerlink" title="是什么"></a>是什么</h3><p>2017年，微信正式推出了小程序，允许外部开发者在微信内部运行自己的代码，开展业务</p>
<p>截至目前，小程序已经成为国内前端的一个重要业务，跟 <code>Web</code> 和手机 <code>App</code> 有着同等的重要性</p>
<p>小程序是一种不需要下载安装即可使用的应用（但实际上还是存在一个轻量级的下载和安装流程，不过用户感知不到），它实现了应用“触手可及”的梦想，用户扫一扫或者搜一下即可打开应用</p>
<p>也体现了“用完即走”的理念，用户不用关心是否安装太多应用的问题。应用将无处不在，随时可用，但又无需安装卸载</p>
<p>注意的是，除了微信小程序，还有百度小程序、微信小程序、支付宝小程序、抖音小程序，都是每个平台自己开发的，都是有针对性平台的应用程序</p>
<h3 id="背景"><a href="#背景" class="headerlink" title="背景"></a>背景</h3><p>小程序并非凭空冒出来的⼀个概念，当微信中的 <code>WebView</code> 逐渐成为移动 <code>Web</code>的⼀个重要⼊⼝时，微信就有相关的 <code>JS-SDK</code></p>
<p><code>JS-SDK</code> 解决了移动网页能⼒不⾜的问题，通过暴露微信的接⼝使得 <code>Web</code> 开发者能够拥有更多的能⼒，然而在更多的能⼒之外，<code>JS-SDK</code>的模式并没有解决使⽤移动网页遇到的体验不良的问题</p>
<p>因此需要设计⼀个比较好的系统，使得所有开发者在微信中都能获得⽐较好的体验：</p>
<ul>
<li>快速的加载</li>
<li>更强⼤的能⼒</li>
<li>原⽣的体验</li>
<li>易⽤且安全的微信数据开放</li>
<li>高效和简单的开发</li>
</ul>
<p>这些是<code>JS-SDK</code>做不到的，需要设计一个全新的小程序系统</p>
<p>其中相比<code>H5</code>，小程序与其的区别有如下：</p>
<ul>
<li>运⾏环境：⼩程序基于浏览器内核重构的<code>内置解析器</code></li>
<li>系统权限：⼩程序能获得更多的系统权限，如⽹络通信状态、数据缓存能⼒等</li>
<li>渲染机制：⼩程序的<code>逻辑层</code>和<code>渲染层</code>是分开的</li>
</ul>
<p>微信小程序可以视为只能用微信打开和浏览的<code>H5</code>，小程序和网页的技术模型是一样的，用到的 <code>JavaScript</code> 语言和 <code>CSS</code> 样式也是一样的，只是网页的 <code>HTML</code> 标签被稍微修改成了 <code>WXML</code> 标签</p>
<p><strong>因此可以说，小程序页面本质上就是网页</strong></p>
<p>其中关于微信小程序的实现原理，我们在后面的文章讲到</p>
<h3 id="优缺点"><a href="#优缺点" class="headerlink" title="优缺点"></a>优缺点</h3><p>优点：</p>
<ul>
<li>随搜随用，用完即走：使得小程序可以代替许多APP，或是做APP的整体嫁接，或是作为阉割版功能的承载体</li>
<li>流量大，易接受：小程序借助自身平台更加容易引入更多的流量</li>
<li>安全</li>
<li>开发门槛低</li>
<li>降低兼容性限制</li>
</ul>
<p>缺点：</p>
<ul>
<li>用户留存：及相关数据显示，小程序的平均次日留存在13%左右，但是双周留存骤降到仅有1%</li>
<li><code>体积限制</code>：微信小程序只有2M的大小，这样导致无法开发大型一些的小程序</li>
<li>受控微信：比起APP，尤其是安卓版的高自由度，小程序要面对很多来自微信的<strong>限制</strong>，从功能接口，甚至到类别内容，都要接受微信的管控</li>
</ul>
<h2 id="说说微信小程序的实现原理？"><a href="#说说微信小程序的实现原理？" class="headerlink" title="说说微信小程序的实现原理？"></a>说说微信小程序的实现原理？</h2><h3 id="背景-1"><a href="#背景-1" class="headerlink" title="背景"></a>背景</h3><p>网页开发，渲染线程和脚本是互斥的，这也是为什么长时间的脚本运行可能会导致页面失去响应的原因，本质就是我们常说的 <code>JS</code> 是单线程的</p>
<p>而在小程序中，选择了 <code>Hybrid</code> 的渲染方式，将<code>视图层</code>和<code>逻辑层</code>分开的，<strong>双线程</strong>同时运行，视图层的界面使用 <code>WebView</code> 进行渲染，逻辑层运行在 <code>JSCore</code> 中</p>
<img src="..\images\小程序\微信小程序.png" style="zoom:100%;" />

<ul>
<li><p><strong>渲染层</strong>：</p>
<p>使用 WXML 和 WXSS 编写，类似于 HTML 和 CSS。</p>
<p>负责界面展示，包括布局、样式等。 </p>
<p>实际上是通过<code> WebView</code> 来<code>解析</code>和<code>渲染</code>的，但在微信小程序中进行了优化，以提供接近原生应用的性能。</p>
<p>界面渲染相关的任务全都在<code>WebView</code>线程里执行。一个小程序存在多个界面，所以渲染层存在多个 WebView 线程</p>
</li>
<li><p><strong>逻辑层</strong>：</p>
<p>主要使用 JavaScript 编写。</p>
<p>负责处理业务逻辑、数据获取、<code>API 请求</code>等，其中网络请求由<code>微信客户端</code>进行<strong>转发</strong></p>
<p>运行在一个基于 V8 或者 JSCore 的 JavaScript 引擎之上（视操作系统而定）</p>
</li>
<li><p><strong>Native</strong></p>
<p>Native 层指的是<code>微信客户端</code>本身的<code>原生代码</code>，它负责：</p>
<ul>
<li>提供基础库，包含所有可用的 <code>API</code>。</li>
<li>处理逻辑层和渲染层之间的高效通信。</li>
<li>实现性能优化，确保小程序能够流畅运行。</li>
<li>提供安全机制，保护用户数据和隐私。</li>
</ul>
</li>
</ul>
<h3 id="WebView-是什么"><a href="#WebView-是什么" class="headerlink" title="WebView 是什么"></a>WebView 是什么</h3><p>WebView 是一个允许在应用程序内部<strong>展示网页内容的组件，它依赖于特定平台上的<code>浏览器内核</code>来工作</strong>。</p>
<p>在不同的平台上有不同实现：</p>
<ul>
<li><strong>Android</strong>：使用 <code>android.webkit.WebView</code>。</li>
<li><strong>iOS</strong>：使用 <code>WKWebView</code>（较新的推荐使用方式）或 <code>UIWebView</code>（已废弃）。</li>
</ul>
<p>相当于 Web 开发中的 <strong>浏览器渲染引擎</strong>，也就是浏览器的内核，关于浏览器的介绍可以参考：<a href="https://www.sanye.blog/posts/c0add594.html">前端面试—网络 | 三叶的博客</a></p>
<h3 id="通信"><a href="#通信" class="headerlink" title="通信"></a>通信</h3><p>逻辑层和渲染层之间的通信，是通过<code>微信客户端</code>(Native，或者说是宿主环境)提供的 <code>API </code>实现的，比如逻辑层可以通过 <code>setData</code> 方法将数据传递给渲染层，触发页面更新：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable language_">this</span>.<span class="title function_">setData</span>(&#123;</span><br><span class="line">  <span class="attr">message</span>: <span class="string">&#x27;Hello, World!&#x27;</span></span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<p>在逻辑层发生数据变更的时候，通过宿主环境（native）提供的<code>setData</code>方法把数据从<code>逻辑层</code>传递到<code>渲染层</code>，再经过对比前后差异，把差异应用在原来的<code>Dom</code>树上(小程序在渲染层，宿主环境会把<code>wxml</code>转化成对应的<code>JS</code>对象，类似web开发中的dom对象），渲染出正确的视图</p>
<img src="..\images\小程序\微信小程序2.png" style="zoom:90%;" />

<p>当视图存在交互的时候，例如用户点击你界面上某个按钮，这类反馈应该通知给开发者的逻辑层，需要将对应的处理状态呈现给用户</p>
<p>对于事件的分发处理，微信进行了特殊的处理，将所有的事件拦截后，丢到逻辑层交给<code>JavaScript</code>进行处理</p>
<img src="..\images\小程序\微信小程序3.png" style="zoom:100%;" />

<p>由于小程序是基于双线程的，也就是任何在<code>视图层</code>和<code>逻辑层</code>之间的数据传递都是<code>线程间的通信</code>，会有一定的<code>延时</code>，因此在小程序中，页面更新成了异步操作</p>
<p>异步会使得各部分的运行时序变得复杂一些，比如在<code>渲染首屏</code>的时候，<code>逻辑层</code>与<code>渲染层</code>会同时开始初始化工作，但是渲染层需要有逻辑层的数据才能把界面渲染出来</p>
<p>如果渲染层初始化工作较快完成，就要等逻辑层的指令才能进行下一步工作</p>
<p>因此逻辑层与渲染层需要有一定的机制保证<code>时序正确</code>(异步同步化)，在每个小程序页面的生命周期中，存在着若干次页面数据通信。</p>
<img src="..\images\小程序\微信小程序4.png" style="zoom:100%;" />

<h3 id="运行机制"><a href="#运行机制" class="headerlink" title="运行机制"></a>运行机制</h3><p>小程序启动运行两种情况</p>
<ul>
<li>冷启动（重新开始）：用户<code>首次打开</code>或者小程序被微信<code>主动销毁</code>后再次打开的情况，此时小程序需要重新加载启动，即为冷启动。</li>
<li>热启动：用户已经打开过小程序，然后在一定时间内再次打开该小程序，此时无需重新启动，只需要将<code>后台态</code>的小程序切换到前台，这个过程就是热启动。</li>
</ul>
<p><strong>初次启动过程</strong></p>
<p>1.把小程序的代码包下载到本地</p>
<p>2.解析<code>app.json</code>全局配置文件</p>
<p>3.执行<code>app.js </code>小程序入口文件，调用<code>App()</code>创建小程序实例</p>
<p>4.渲染小程序首页（app.json 文件中的 pages 数组的第一个页面路径）</p>
<p>5.加载解析页面的<code>.json</code>配置文件</p>
<p>6.加载页面的<code>.wxml</code>模板和<code>.wxss</code>样式</p>
<p>7.执行页面的<code>.js </code>文件，调用<code>Page()</code>创建页面实例，页面渲染完成</p>
<p>8.小程序启动完成</p>
<p><strong>注意：</strong></p>
<p>1.小程序没有重启的概念<br>2.当小程序进入后台，客户端会维持一段时间的运行状态，超过一定时间后会被微信<code>主动销毁</code><br>3.短时间内收到系统两次以上内存警告，也会对小程序进行销毁，这也就为什么一旦页面内存溢出，页面会奔溃的本质原因了</p>
<img src="..\images\小程序\微信小程序5.png" style="zoom:90%;" />

<p>每次冷启动时，都会检查是否有<code>更新版本</code>，如果发现有新版本，将会<code>异步下载</code>新版本的代码包，并同时使用<code>客户端本地的包（缓存中的包）</code>进行启动，即新版本的小程序需要等<code>下一次冷启动</code>才会应用上。</p>
<h2 id="快速开始"><a href="#快速开始" class="headerlink" title="快速开始"></a>快速开始</h2><p><strong>注册账号</strong></p>
<p>前往微信公众平台：<a target="_blank" rel="noopener external nofollow noreferrer" href="https://mp.weixin.qq.com/">https://mp.weixin.qq.com/</a></p>
<p><strong>下载微信开发者工具</strong></p>
<p><a target="_blank" rel="noopener external nofollow noreferrer" href="https://developers.weixin.qq.com/miniprogram/dev/devtools/stable.html">https://developers.weixin.qq.com/miniprogram/dev/devtools/stable.html</a></p>
<p><strong>创建第一个项目</strong></p>
<p>使用js基础模板</p>
<p><strong>使用技巧</strong></p>
<ul>
<li>查看效果<ul>
<li>编译-&gt;模拟</li>
<li>打开模拟器后底部可以看到页面路径</li>
<li>手机预览</li>
</ul>
</li>
<li>帮助-&gt;开发者文档</li>
<li>详情<ul>
<li>查看小程序信息</li>
<li>本地设置</li>
</ul>
</li>
</ul>
<h2 id="项目结构概述"><a href="#项目结构概述" class="headerlink" title="项目结构概述"></a>项目结构概述</h2><img src="..\images\小程序\6.png" style="zoom:90%;" />

<ul>
<li><p><strong>pages</strong></p>
<p>用来存放所有小程序的页面，每个页面以单独的<code>文件夹</code>存在<br>其中，每个页面由4个基本文件组成</p>
<ul>
<li>.js文件(页面的脚本文件，存放页面的数据、事件处理函数等)</li>
<li>.json 文件（当前页面的配置文件，配置窗口的外观、表现等)</li>
<li>.wxml文件（页面的<code>模板结构</code>文件)</li>
<li>.wxss文件（当前页面的样式表文件)</li>
</ul>
</li>
<li><p><strong>utils</strong></p>
<p>用来存放工具性质的模块（例如:格式化时间的自定义模块)</p>
</li>
<li><p><strong>app.js</strong></p>
<p>小程序项目的<code>入口文件</code></p>
</li>
<li><p><strong>app.json</strong></p>
<p>小程序项目的<code>全局配置</code>文件</p>
</li>
<li><p><strong>app.wxss</strong> </p>
<p>小程序项目的全局样式文件</p>
</li>
<li><p><strong>project.config.json</strong></p>
<p>项目的配置文件</p>
</li>
<li><p><strong>sitemap.json</strong></p>
<p>站点地图，用来配置小程序及其页面是否允许被微信索引</p>
</li>
</ul>
<h2 id="JSON文件总结"><a href="#JSON文件总结" class="headerlink" title="JSON文件总结"></a>JSON文件总结</h2><h3 id="app-json"><a href="#app-json" class="headerlink" title="app.json"></a><strong>app.json</strong></h3><p>是当前小程序的<code>全局配置</code>，包括了小程序的所有<code>页面路径</code>、<code>窗口外观</code>、<code>界面表现</code>、<code>底部 tab</code>等。</p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">  <span class="comment">//放页面路径</span></span><br><span class="line">  <span class="attr">&quot;pages&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span></span><br><span class="line">  <span class="punctuation">]</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;window&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">  <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;tabBar&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">  <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="comment">//全局注册的组件</span></span><br><span class="line">  <span class="attr">&quot;usingComponents&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span><span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="comment">//指定分包</span></span><br><span class="line">  <span class="attr">&quot;subPackages&quot;</span><span class="punctuation">:</span><span class="punctuation">[</span><span class="punctuation">]</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure>

<p>只需要在 <code>app.json-&gt; pages</code>中新增页面的存放路径，小程序开发者工具即可帮我们自动创建对应的<code>页面文件</code></p>
<p>只需要调整<code>app.json-&gt; pages</code>字符串数组中<code>页面路径</code>的前后顺序，即可修改项目的<strong>首页</strong>。小程序会把排在<code>第一位的页面</code>，当作项目<code>首页</code>进行渲染。</p>
<h4 id="window"><a href="#window" class="headerlink" title="window"></a>window</h4><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//app.json</span></span><br><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">  ....</span><br><span class="line">  <span class="attr">&quot;window&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;navigationBarTextStyle&quot;</span><span class="punctuation">:</span> <span class="string">&quot;black&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;navigationBarBackgroundColor&quot;</span><span class="punctuation">:</span> <span class="string">&quot;#fff&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;backgroundColor&quot;</span><span class="punctuation">:</span> <span class="string">&quot;#F8F8F8&quot;</span></span><br><span class="line">  <span class="punctuation">&#125;</span></span><br><span class="line">  ....</span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure>

<ul>
<li><p>navigationBar系列(导航栏)</p>
<ul>
<li>navigationBarTitleText：修改导航栏的标题</li>
<li>navigationBarBackgroundColor：修改导航栏的背景色，只支持<code>16进制颜色</code>，不能设置为red，blue等</li>
<li>navigationBarTextStyle：设置标题颜色，可选值只能是black和white（为什么这里又能直接写颜色了？）</li>
</ul>
</li>
<li><p>background系列（下拉页面才会显示的部分的背景配置）</p>
<ul>
<li>backgroundColor：指定16进制的颜色值比如#efefef。</li>
<li>backgroundTextStyle：只支持<code>dark和light</code>。</li>
</ul>
</li>
<li><p>onReachBottomDistance</p>
<p>默认为<code>50px</code>，当滚动条距离底部50px的时候触发<code>触底刷新</code></p>
</li>
<li><p>enablePullDownRefresh</p>
<p>设置为true，表示允许下拉刷新</p>
</li>
</ul>
<h4 id="tabBar"><a href="#tabBar" class="headerlink" title="tabBar"></a>tabBar</h4><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//app.json</span></span><br><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">  ....</span><br><span class="line">  <span class="attr">&quot;tabBar&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;selectedColor&quot;</span><span class="punctuation">:</span> <span class="string">&quot;#28b389&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;list&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span></span><br><span class="line">      <span class="punctuation">&#123;</span></span><br><span class="line">        <span class="attr">&quot;pagePath&quot;</span><span class="punctuation">:</span> <span class="string">&quot;pages/home/home&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;iconPath&quot;</span><span class="punctuation">:</span> <span class="string">&quot;static/home.png&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;selectedIconPath&quot;</span><span class="punctuation">:</span> <span class="string">&quot;static/home-h.png&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;text&quot;</span><span class="punctuation">:</span> <span class="string">&quot;推荐&quot;</span></span><br><span class="line">      <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="punctuation">&#123;</span></span><br><span class="line">        <span class="attr">&quot;pagePath&quot;</span><span class="punctuation">:</span> <span class="string">&quot;pages/classify/classify&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;iconPath&quot;</span><span class="punctuation">:</span> <span class="string">&quot;static/classify.png&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;selectedIconPath&quot;</span><span class="punctuation">:</span> <span class="string">&quot;static/classify-h.png&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;text&quot;</span><span class="punctuation">:</span> <span class="string">&quot;分类&quot;</span></span><br><span class="line">      <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="punctuation">&#123;</span></span><br><span class="line">        <span class="attr">&quot;pagePath&quot;</span><span class="punctuation">:</span> <span class="string">&quot;pages/user/user&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;iconPath&quot;</span><span class="punctuation">:</span> <span class="string">&quot;static/user.png&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;selectedIconPath&quot;</span><span class="punctuation">:</span> <span class="string">&quot;static/user-h.png&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;text&quot;</span><span class="punctuation">:</span> <span class="string">&quot;我的&quot;</span></span><br><span class="line">      <span class="punctuation">&#125;</span></span><br><span class="line">    <span class="punctuation">]</span></span><br><span class="line">  <span class="punctuation">&#125;</span></span><br><span class="line">  ....</span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure>

<ul>
<li>selectedlconPath：选中时显示的图标路径</li>
<li>iconPath：未选中时显示的图标路径</li>
<li>color：tab上文字的默认（未选中）颜色</li>
<li>selectedColor： tab 上的文字选中时的颜色</li>
<li>pagePath：tab对应的页面路径，点击tab会跳转到指定页面。</li>
</ul>
<p><strong>注意</strong>：</p>
<p>tabBar中只能配置最少2个、最多5个tab页签（list数组里的元素数目等于tab数目）</p>
<p>当渲染<strong>顶部</strong> tabBar时，不显示 icon，只显示文本</p>
<h3 id="页面的json文件"><a href="#页面的json文件" class="headerlink" title="页面的json文件"></a>页面的json文件</h3><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">  <span class="attr">&quot;navigationBarTitleText&quot;</span><span class="punctuation">:</span> <span class="string">&quot;分类&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;navigationStyle&quot;</span><span class="punctuation">:</span> <span class="string">&quot;custom&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;enablePullDownRefresh&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">true</span></span><span class="punctuation">,</span></span><br><span class="line">  <span class="comment">//局部组件注册</span></span><br><span class="line">  <span class="attr">&quot;usingComponents&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;nav-bar&quot;</span><span class="punctuation">:</span> <span class="string">&quot;../../components/nav-bar/nav-bar&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;theme-item&quot;</span><span class="punctuation">:</span> <span class="string">&quot;../../components/theme-item/theme-item&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;uni-load-more&quot;</span><span class="punctuation">:</span> <span class="string">&quot;../../uni_modules/uni-load-more/components/uni-load-more/uni-load-more&quot;</span></span><br><span class="line">  <span class="punctuation">&#125;</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure>

<p>页面的json文件中的属性，就是全局配置（app.json）中window的配置属性。</p>
<p>小程序中的每一个页面，可以使用<code>json</code>文件来对本页面的<code>窗口外观</code>进行配置，页面中的配置项会<strong>覆盖</strong>app.json的<code> window</code>属性中相同的配置项。</p>
<h3 id="project-config-json"><a href="#project-config-json" class="headerlink" title="project.config.json"></a><strong>project.config.json</strong></h3><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">  <span class="attr">&quot;description&quot;</span><span class="punctuation">:</span> <span class="string">&quot;项目配置文件。&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;packOptions&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;ignore&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span><span class="punctuation">]</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;include&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span><span class="punctuation">]</span></span><br><span class="line">  <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;setting&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;urlCheck&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">false</span></span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;es6&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">true</span></span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;postcss&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">false</span></span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;minified&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">true</span></span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;newFeature&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">true</span></span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;bigPackageSizeSupport&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">true</span></span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;babelSetting&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">      <span class="attr">&quot;ignore&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span><span class="punctuation">]</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;disablePlugins&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span><span class="punctuation">]</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;outputPath&quot;</span><span class="punctuation">:</span> <span class="string">&quot;&quot;</span></span><br><span class="line">    <span class="punctuation">&#125;</span></span><br><span class="line">  <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;compileType&quot;</span><span class="punctuation">:</span> <span class="string">&quot;miniprogram&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;libVersion&quot;</span><span class="punctuation">:</span> <span class="string">&quot;3.5.5&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;appid&quot;</span><span class="punctuation">:</span> <span class="string">&quot;xyz&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;projectname&quot;</span><span class="punctuation">:</span> <span class="string">&quot;4meinv&quot;</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure>

<p>是项目配置文件，用来记录我们对小程序开发工具所做的个性化配置,</p>
<p><code>setting</code>中保存了编译相关的配置</p>
<p><code>projectname</code>中保存的是项目名称，项目名称不等于小程序名称</p>
<p><code>appid</code>中保存的是<code>小程序的账号ID</code></p>
<h3 id="sitemap-json"><a href="#sitemap-json" class="headerlink" title="sitemap.json"></a><strong>sitemap.json</strong></h3><p>站点地图，微信现已开放小程序内搜索，效果类似于PC网页的<code>SEO</code>(搜索引擎优化)。该文件用来配置小程序页面是否允许微信索引。</p>
<h2 id="js文件总结"><a href="#js文件总结" class="headerlink" title="js文件总结"></a>js文件总结</h2><h3 id="app-js"><a href="#app-js" class="headerlink" title="app.js"></a>app.js</h3><p>是整个小程序项目的<code>入口文件</code>，通过调用<code>App()</code>函数来启动整个小程序</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="title function_">createApp</span>().<span class="property">app</span>.<span class="title function_">mount</span>(<span class="string">&quot;#app&quot;</span>);</span><br></pre></td></tr></table></figure>

<h3 id="页面的-js-文件"><a href="#页面的-js-文件" class="headerlink" title="页面的.js 文件"></a>页面的.js 文件</h3><p>是页面的入口文件，页面的脚本文件，存放页面的数据、事件处理函数等</p>
<p>通过调用<code>Page()</code>函数来创建并运行页面</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">wx.<span class="title function_">createPage</span>(<span class="title class_">MiniProgramPage</span>);</span><br></pre></td></tr></table></figure>

<h2 id="api"><a href="#api" class="headerlink" title="api"></a>api</h2><p><code>wx</code>对象在浏览器中就相当于<code>window</code></p>
<h3 id="事件监听"><a href="#事件监听" class="headerlink" title="事件监听"></a>事件监听</h3><p>以on开头，用来监听某些事件的触发，</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">wx.<span class="title function_">onWindowResize</span>(<span class="keyword">function</span> callback)<span class="comment">//监听窗口尺寸变化的事件</span></span><br></pre></td></tr></table></figure>

<h3 id="同步api"><a href="#同步api" class="headerlink" title="同步api"></a>同步api</h3><p>以<code>Sync</code>结尾的API都是同步API</p>
<p>同步API的执行结果，可以通过<code>函数返回值</code>直接获取，如果执行出错会抛出异常</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">wx.<span class="title function_">setStorageSync</span>(<span class="string">&#x27;key&#x27;</span>,<span class="string">&#x27;value&#x27;</span>)<span class="comment">//向本地存储中写入内容</span></span><br></pre></td></tr></table></figure>

<h3 id="异步api"><a href="#异步api" class="headerlink" title="异步api"></a><strong>异步api</strong></h3><p>类似于jQuery 中的$.ajax(options)函数，需要通过success、fail、complete<code>回调函数</code>接收调用的结果</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">wx.<span class="title function_">request</span>()<span class="comment">//发起网络数据请求，通过success回调函数接收数据</span></span><br></pre></td></tr></table></figure>

<h2 id="基础语法"><a href="#基础语法" class="headerlink" title="基础语法"></a>基础语法</h2><h3 id="事件"><a href="#事件" class="headerlink" title="事件"></a>事件</h3><ul>
<li><p>tap</p>
<p>手指触摸后马上离开，类似于HTML中的click 事件</p>
<p>绑定方式：<code>bindtap 或 bind:tap</code>，</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">&quot;container&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">button</span> <span class="attr">bindtap</span>=<span class="string">&quot;handleTap&quot;</span>&gt;</span>点击我<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br></pre></td></tr></table></figure>

<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="title class_">Page</span>(&#123;</span><br><span class="line">  <span class="title function_">handleTap</span>(<span class="params">e</span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;按钮被点击了&#x27;</span>);</span><br><span class="line">    <span class="comment">// 可以在这里执行其他逻辑，如发起网络请求或更新页面状态</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
</li>
<li><p>input</p>
<p>文本框输入事件</p>
<p>绑定方式：<code>bindinput或 bind:input</code></p>
<p>通过<code>e.detail.value</code>获得最新输入的值，不同于js的<code>e.target.value</code></p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">&quot;container&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">placeholder</span>=<span class="string">&quot;输入内容&quot;</span> <span class="attr">bindinput</span>=<span class="string">&quot;handleInput&quot;</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br></pre></td></tr></table></figure>

<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="title class_">Page</span>(&#123;</span><br><span class="line">  <span class="title function_">handleInput</span>(<span class="params">e</span>) &#123;</span><br><span class="line">    <span class="keyword">const</span> inputValue = e.<span class="property">detail</span>.<span class="property">value</span>;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;当前输入值:&#x27;</span>, inputValue);</span><br><span class="line">    <span class="comment">// 更新页面状态或其他操作</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
</li>
<li><p>change</p>
<p>状态改变时触发，绑定方式同上</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">&quot;container&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">switch</span> <span class="attr">bindchange</span>=<span class="string">&quot;handleChange&quot;</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br></pre></td></tr></table></figure>

<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="title class_">Page</span>(&#123;</span><br><span class="line">  <span class="title function_">handleChange</span>(<span class="params">e</span>) &#123;</span><br><span class="line">    <span class="keyword">const</span> isChecked = e.<span class="property">detail</span>.<span class="property">value</span>;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;开关状态改变为:&#x27;</span>, isChecked ? <span class="string">&#x27;开启&#x27;</span> : <span class="string">&#x27;关闭&#x27;</span>);</span><br><span class="line">    <span class="comment">// 根据开关状态执行相应逻辑</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure></li>
</ul>
<p><strong>事件对象</strong></p>
<p>和<code>js</code>中的事件对象相同，<code>e.target</code>表示目标对象，即触发该事件的对象；<code>e.currentTarget</code>表示事件流经过的当前对象；<code>e.type</code>表示事件类型。</p>
<h3 id="数据绑定"><a href="#数据绑定" class="headerlink" title="数据绑定"></a>数据绑定</h3><p>页面数据写在js文件中</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="title class_">Page</span>(&#123;</span><br><span class="line">    <span class="attr">data</span>: &#123;</span><br><span class="line">		<span class="attr">info</span>: <span class="string">&#x27;init data&#x27;</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<p>wxml文件中使用:</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">image</span> <span class="attr">src</span>=<span class="string">&quot;&#123;&#123;imgSrc&#125;&#125; &quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">image</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">view</span>&gt;</span>&#123;&#123;info&#125;&#125;<span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>在wxml文件中使用js中的数据一定要加<code>&#123;&#123;&#125;&#125;</code></p>
<h3 id="条件渲染"><a href="#条件渲染" class="headerlink" title="条件渲染"></a>条件渲染</h3><p><strong>wx:if&#x2F;wx:elif&#x2F;wx:else</strong></p>
<p><strong>block组件</strong></p>
<p>类似vue中的template</p>
<p><strong>hidden</strong></p>
<p>类似vue中的<code>v-show</code>，不一样的是这里值为true的话是隐藏，v-show是显示</p>
<h3 id="列表渲染"><a href="#列表渲染" class="headerlink" title="列表渲染"></a>列表渲染</h3><ul>
<li><p>wx:for：传入一个数组</p>
</li>
<li><p>wx:for-item：可以指定当前项的变量名</p>
</li>
<li><p>wx:for-index：可以指定当前循环项的索引的变量名</p>
</li>
<li><p>wx:key</p>
<p>类似vue中的key，如果数组item中有<code>id</code>属性，直接令wx:key&#x3D;’id’即可，不需要写成<code>&#123;&#123;item.id&#125;&#125;</code>，否则会报错（真是奇怪）</p>
</li>
</ul>
<p><strong>示例</strong></p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">view</span> <span class="attr">wx:for</span>=<span class="string">&quot;&#123;&#123;arr&#125;&#125;&quot;</span>&gt;</span></span><br><span class="line"> 索引是: &#123;&#123;index&#125;&#125;, item项是:&#123;&#123;item&#125;&#125;</span><br><span class="line"><span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br></pre></td></tr></table></figure>

<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">view</span> <span class="attr">wx:for</span>=<span class="string">&quot;&#123;&#123;arr1&#125;&#125;&quot;</span> <span class="attr">wx:for-index</span>=<span class="string">&quot;idx&quot;</span> <span class="attr">wx:for-item</span>=<span class="string">&quot;itemName&quot;</span> <span class="attr">wx:key</span>=<span class="string">&quot;idx&quot;</span>&gt;</span></span><br><span class="line"> 索引是: &#123;&#123;idx&#125;&#125;, item项是: &#123;&#123;itemName&#125;&#125;</span><br><span class="line"><span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h3 id="wxml与html的区别"><a href="#wxml与html的区别" class="headerlink" title="wxml与html的区别"></a>wxml与html的区别</h3><p><code>标签名称</code>不同</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">HTML ( div, span, img, a)</span><br><span class="line">wxml (view, text, image, navigator)</span><br></pre></td></tr></table></figure>

<p><code>属性节点</code>不同</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;#&quot;</span>&gt;</span>超链接<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">navigator</span> <span class="attr">url</span>=<span class="string">&quot;/pages/home/home&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">navigator</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h3 id="wxss与css的区别"><a href="#wxss与css的区别" class="headerlink" title="wxss与css的区别"></a>wxss与css的区别</h3><ul>
<li><p>新增了<code>rpx</code>尺寸单位</p>
<p>CSS中需要手动进行像素单位换算，例如rem，wxss在底层支持新的尺寸单位rpx，在不同大小的屏幕上小程序会自动进行换算。</p>
<p>鉴于不同设备屏幕的大小不同，为了实现屏幕的自动适配，rpx把所有设备的屏幕，在<code>宽度</code>上等分为750份（即:当前屏幕的总宽度为750rpx)。小程序在不同设备上运行的时候，会自动把 rpx的样式单位换算成对应的<code>像素单位(px)</code>来渲染，从而实现屏幕适配。</p>
</li>
<li><p>wxss仅支持<strong>部分</strong>CSS选择器</p>
</li>
<li><p>提供了全局的样式和局部样式</p>
<p>项目根目录中的<code>app.wxss</code>会作用于所有小程序页面，而页面的wxss样式仅对当前页面生效。</p>
</li>
</ul>
<h3 id="wxs与js的区别"><a href="#wxs与js的区别" class="headerlink" title="wxs与js的区别"></a>wxs与js的区别</h3><ul>
<li>只支持js的部分语法，不支持es6语法		</li>
<li>声明变量只能用var，没有const，let</li>
<li>不能写箭头表达式</li>
<li>对象键值名称相同不能省略</li>
<li>wxs不能调用js 中定义的函数</li>
<li>wxs不能调用小程序提供的API</li>
</ul>
<p>说白了wx小程序上运行的js代码是阉割版的…</p>
<p><strong>特点</strong></p>
<ul>
<li>wxs 代码可以编写在wxml文件中的<code>&lt;wxs&gt;</code>标签内，就像Javascript 代码可以编写在 html文件中的<code>&lt;script&gt;</code>标签内一样。</li>
<li>wxml文件中的每个<code>&lt;wxs&gt;&lt;/wxs&gt;</code>标签，必须提供 <code>module</code>属性，用来指定当前wxs 的<code>模块名称</code>，方便在wxml中访问模块中的成员</li>
<li>wxs代码还可以编写在以<code>.wxs</code>为后缀名的文件内，就像javascript代码可以编写在以.js为后缀名的文件中一样。</li>
<li>在wxml中引入外联的 wxs脚本时，必须为<code>&lt;wxs&gt;</code>标签添加module和src属性，module用来指定模块的名称src，用来指定要引入的脚本的路径，且必须是<code>相对路径</code>。</li>
</ul>
<h3 id="组件"><a href="#组件" class="headerlink" title="组件"></a>组件</h3><h4 id="视图组件"><a href="#视图组件" class="headerlink" title="视图组件"></a>视图组件</h4><ul>
<li><p>view</p>
<p>普通视图区域，类似于HTML中的div，是一个块级元素常用来实现页面的布局效果</p>
</li>
<li><p>scroll-view</p>
<p>可滚动的视图区域，常用来实现滚动列表效果；添加<code>scroll-y</code>属性，允许y轴滚动。</p>
</li>
<li><p>swiper和swiper-item</p>
<p>轮播图组件，常用属性：</p>
<ul>
<li>indicator-dots：添加导航条，默认值false</li>
<li>indicator-color：指示点颜色</li>
<li>indicator-active-color：当前选中的指示点颜色</li>
<li>autoplay：是否自动切换，默认为false</li>
<li>interval：自动切换时间间隔（单位ms）</li>
<li>circular：是否采用衔接滑动，默认为false</li>
</ul>
</li>
<li><p>text</p>
<p>添加了<code>selectable</code>属性才能实现长按选择复制等操作</p>
</li>
<li><p>rich-text</p>
<p>通过rich-text组件的<code>nodes</code>属性节点，把HTML字符串渲染为对应的结构，就像vue里的<code>v-html</code>。</p>
<p>这段代码会将 <code>&lt;h1&gt;</code> 元素的内容渲染到 <code>&lt;rich-text&gt;</code> 组件内部，而不是替换整个 <code>&lt;rich-text&gt;</code> 标签</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">rich-text</span> <span class="attr">nodes</span>=<span class="string">&quot;&lt;h1 style=&#x27;color: red; &#x27;&gt;标题&lt;/h1&gt;&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">rich-text</span>&gt;</span></span><br></pre></td></tr></table></figure></li>
</ul>
<h4 id="其他组件"><a href="#其他组件" class="headerlink" title="其他组件"></a>其他组件</h4><ul>
<li><p>button</p>
<p>功能比HTML中的button 按钮丰富</p>
<p>属性：</p>
<ul>
<li>type：指定按钮的<code>类型，颜色</code>，有点像前端框架里的语法了</li>
<li>size：指定按钮的大小</li>
<li>plain：添加了就具有镂空样式</li>
<li>open-type：通过这个属性可以调用微信提供的各种功能（客服、转发、获取用户授权、获取用户信息等)</li>
</ul>
</li>
<li><p>image</p>
<p>组片组件，有默认宽高</p>
<p>mode属性（前3个修改图片大小，后2个修改image容器大小）</p>
<ul>
<li>scaleToFill：(默认值）缩放模式，不保持纵横比缩放图片，使图片的宽高完全拉伸至填满image元素。没有空隙，没有裁剪，但是会失真）</li>
<li>aspect<strong>Fit</strong>：缩放模式，保持纵横比缩放图片，使图片的长边能完全显示出来。也就是说，可以完整地将图片显示出来。（就是contain）。没有裁剪，没有失真，但是可能有空隙。</li>
<li>aspect<strong>Fill</strong>：缩放模式，保持纵横比缩放图片，只保证图片的短边能完全显示出来。也就是说图片通常只在水平或垂直方向是完整的，另一个方向将会发生截取。（就是cover）。有裁剪，但是没有失真，没有空隙。</li>
<li>widthFix：缩放模式，<code>容器</code>的宽度不变，高度自动变化，保持原图宽高比不变</li>
<li>heightFix：缩放模式，<code>容器</code>的高度不变，宽度自动变化，保持原图宽高比不变</li>
</ul>
<p><strong>与img区别</strong></p>
<p>微信中的image更像一个容器，src指定的图片是<code>背景图片</code>，前3个属性值在修改背景图片大小，后2个属性在<code>修改容器</code>的大小。</p>
<p>而<code>img</code>的大小就是<code>src</code>指定的图片的大小。</p>
</li>
</ul>
<h3 id="数据请求"><a href="#数据请求" class="headerlink" title="数据请求"></a>数据请求</h3><p><strong>安全限制</strong></p>
<p>只能请求<code>HTTPS</code>类型的接口</p>
<p>必须将接口的<code>域名</code>添加到信任列表中</p>
<p><strong>配置request合法域名</strong></p>
<p>登录微信小程序管理后台→开发→开发设置→服务器域名→修改request合法域名。</p>
<p><strong>跳过域名检查</strong></p>
<p>只能在<code>开发阶段</code>使用，步骤：详情-&gt;本地设置-&gt;不校验…</p>
<p><strong>发请求</strong></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"> wx.<span class="title function_">request</span>(&#123;</span><br><span class="line">      <span class="attr">url</span>: <span class="string">&#x27; https://applet-base-api-t.itheima.net/api/get&#x27;</span>,</span><br><span class="line">      <span class="attr">method</span>:<span class="string">&#x27;GET&#x27;</span>,</span><br><span class="line">      <span class="attr">data</span>:&#123;</span><br><span class="line">        <span class="attr">name</span>:<span class="string">&#x27;tom&#x27;</span>,</span><br><span class="line">        <span class="attr">age</span>:<span class="number">20</span></span><br><span class="line">      &#125;,</span><br><span class="line">      <span class="title function_">success</span>(<span class="params">res</span>)&#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(res.<span class="property">data</span>)</span><br><span class="line">      &#125;<span class="comment">//请求成功后的回调函数</span></span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<p><strong>注意事项</strong></p>
<ul>
<li><p>跨域问题<br>跨域问题只存在于基于浏览器的Web开发中。由于小程序的<strong>宿主环境不是浏览器</strong>而是微信客户端，所以小程序中<strong>不存在跨域的问题</strong></p>
</li>
<li><p>ajax<br>Ajax技术的核心是依赖于浏览器中的<code>XMLHttpRequest</code>这个对象，由于小程序的宿主环境是<code>微信客户端</code>，所以小程序中不能叫做<code>发起Ajax请求</code>，而是叫做<code>发起网络数据请求</code>。</p>
</li>
</ul>
<h3 id="导航"><a href="#导航" class="headerlink" title="导航"></a>导航</h3><h4 id="声明式导航"><a href="#声明式导航" class="headerlink" title="声明式导航"></a>声明式导航</h4><ul>
<li><p>跳转到tabBar页面，需要指定open-type属性为<code>switchTab</code></p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">navigator</span> <span class="attr">url</span>=<span class="string">&quot; /pages/message/message&quot;</span> <span class="attr">open-type</span>=<span class="string">&quot;switchTab&quot;</span>&gt;</span>导航到消息页面<span class="tag">&lt;/<span class="name">navigator</span>&gt;</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>跳转到非tabBar页面：open-type必须为<code>navigate</code>，也可以省略不写 </p>
</li>
<li><p>后退导航：如果要后退到上一页面或多级页面，则需要指定<code>open-type</code>属性为<code>navigateBack(&#123;delta:1&#125;)</code>，delta表示后退层级</p>
</li>
</ul>
<h4 id="编程式导航"><a href="#编程式导航" class="headerlink" title="编程式导航"></a>编程式导航</h4><ul>
<li><p>跳转到tabBar页面<br>使用<code>wx.switchTab()</code>方法，传入一个对象，必须包含url属性</p>
</li>
<li><p>跳转到非tabBar页面</p>
<p>使用<code>wx.navigateTo()</code>方法，传入一个对象，必须包含url属性</p>
</li>
<li><p>后退导航</p>
<p>wx.navigateBack()，传入<code>&#123;delta：1&#125;</code>指定后退层级</p>
</li>
</ul>
<h4 id="导航传参"><a href="#导航传参" class="headerlink" title="导航传参"></a>导航传参</h4><p>声明式导航传参</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">navigator</span> <span class="attr">url</span>=<span class="string">&quot;/pages/infolinfo?name=zs&amp;age=20&quot;</span>&gt;</span>跳转到info页面<span class="tag">&lt;/<span class="name">navigator</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h4 id="接收参数"><a href="#接收参数" class="headerlink" title="接收参数"></a>接收参数</h4><p>通过声明式导航传参或编程式导航传参所携带的参数，可以直接在<code>onLoad</code>事件中直接获取到</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="title function_">onUpload</span>(<span class="params">options</span>)&#123;</span><br><span class="line">	<span class="variable language_">console</span>.<span class="title function_">log</span>(options)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="下拉刷新-触底加载"><a href="#下拉刷新-触底加载" class="headerlink" title="下拉刷新 触底加载"></a>下拉刷新 触底加载</h3><p><strong>下拉刷新</strong></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">onPullDownRefresh<span class="comment">//下拉事件触发后执行该函数</span></span><br><span class="line">wx.<span class="title function_">stopPullDownRefresh</span>()可以停止当前页面的下拉刷新 </span><br></pre></td></tr></table></figure>

<p><strong>触底加载</strong></p>
<p>通过<code>onReachBottom()</code>函数即可监听当前页面的触底事件</p>
<p><code>onReachBottomDistance</code>的值默认为50px，当滚动条距离底部50px的时候认为已触底。</p>
<h3 id="自定义编译模式"><a href="#自定义编译模式" class="headerlink" title="自定义编译模式"></a>自定义编译模式</h3><p>编译-&gt;添加编译模式，现在用热重载就好了，修改代码保存后不会切换到首页。</p>
<h2 id="自定义组件"><a href="#自定义组件" class="headerlink" title="自定义组件"></a>自定义组件</h2><p>创建components文件夹，右键选择创建组件</p>
<h3 id="引用"><a href="#引用" class="headerlink" title="引用"></a>引用</h3><ul>
<li><p>局部<br>在<code>页面</code>的json文件的<code>usingComponents</code>属性中声明</p>
</li>
<li><p>全局<br>在app.json文件的<code>usingComponents</code>属性中声明，如果没有就自己添加</p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">&quot;usingComponents&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;count&quot;</span><span class="punctuation">:</span><span class="string">&quot;/components/test/test&quot;</span></span><br><span class="line"><span class="punctuation">&#125;</span><span class="comment">//count为组件在页面中的名称</span></span><br></pre></td></tr></table></figure>

<p><strong>总结</strong>：引入组件在json文件中声明，区别于vue</p>
</li>
</ul>
<h3 id="组件和页面的区别"><a href="#组件和页面的区别" class="headerlink" title="组件和页面的区别"></a>组件和页面的区别</h3><ul>
<li>组件的 <code>.json</code>文件中需要声明<code>&quot;component&quot;: true</code></li>
<li>组件的.js文件中调用的是<code>Component()</code>函数，而页面调用的是<code>Page()</code>函数</li>
</ul>
<h3 id="样式单向隔离"><a href="#样式单向隔离" class="headerlink" title="样式单向隔离"></a>样式单向隔离</h3><p>默认情况下，自定义组件的样式只对当前组件生效，不会影响到<code>组件之外</code>的UI结构，但是可以被组件外的样式影响。<br><code>app.wxss</code>中的部分全局样式对组件无效，只有<code>class选择器</code>会有样式隔离效果，id选择器、属性选择器、标签选择器不受样式隔离的影响。</p>
<h2 id="自定义tabbar"><a href="#自定义tabbar" class="headerlink" title="自定义tabbar"></a>自定义tabbar</h2><p>在<code>app.json</code>的<code>tabBar</code>字段中新增<code>custom:true</code>属性</p>
<img src="..\images\小程序\8.png" style="zoom:90%;" />

<p>在根目录新建<code>custom-tab-bar</code>文件，然后右键<code>新建组件</code>，开发工具就会把这个组件当作tabbar</p>
<img src="..\images\小程序\7.png" style="zoom:90%;" />



<p><strong>注意</strong></p>
<ul>
<li><p>vant组件的样式是很容易被pages页面样式（主包资源）覆盖的，因为vant组件样式本身就不是隔绝的，主包的资源是可以共享的，包括样式</p>
</li>
<li><p><strong>每个 tab 页下的自定义 tabBar 组件实例是不同的</strong>，切换到哪个页面，tabbar组件相当于属于哪个页面的组件，会受到这个页面样式的影响</p>
</li>
<li><p>也因为这点，在前一个组件页面修改active，通过导航切换到下一个页面后无效了，所以不能把active交给tabbar组件维护，最好交给仓库维护</p>
</li>
</ul>
<h2 id="分包"><a href="#分包" class="headerlink" title="分包"></a>分包</h2><h3 id="定义"><a href="#定义" class="headerlink" title="定义"></a>定义</h3><p>分包指的是把一个<code>完整的小程序项目</code>，<code>按照需求</code>划分为不同的<code>子包</code>，在构建时打包成不同的分包，用户在使用时<code>按需进行加载</code>，类似webpack中的<strong>代码分割</strong>。可以优化小程序首次启动的下载时间，在多团队共同开发时可以更好的解耦协作。</p>
<h3 id="结构"><a href="#结构" class="headerlink" title="结构"></a>结构</h3><ul>
<li><p>一个主包</p>
<p>一般只包含项目的<code>启动页面</code>或TabBar页面、以及所有分包都需要用到的一些<code>公共资源</code></p>
</li>
<li><p>多个分包</p>
<p>只包含和当前分包有关的<code>页面</code>和<code>私有资源</code></p>
</li>
</ul>
<h3 id="分包的加载规则"><a href="#分包的加载规则" class="headerlink" title="分包的加载规则"></a>分包的加载规则</h3><ul>
<li>在小程序启动时，默认会下载<code>主包</code>并启动主包内页面，<code>tabBar 页面</code>需要放到主包中</li>
<li><code>非tabBar页面</code>可以按照功能的不同，划分为不同的<code>分包</code>之后，进行按需下载</li>
<li>当用户进入分包内某个页面时，客户端会把对应分包下载下来，下载完成后再进行展示</li>
</ul>
<h3 id="体积限制"><a href="#体积限制" class="headerlink" title="体积限制"></a>体积限制</h3><p>整个小程序所有分包大小不超过<code>16M</code>（主包＋所有分包)，单个分包&#x2F;主包大小不能超过<code>2M</code></p>
<h3 id="配置规则"><a href="#配置规则" class="headerlink" title="配置规则"></a>配置规则</h3><ul>
<li><p>根目录下的<code>pages</code>一般放的是所有主包页面</p>
</li>
<li><p>在根目录下新建<code>subpkg</code>文件(自定义名称)，创建<code>一个</code>分包，内部可以有多个页面，就如同pages文件夹。</p>
<img src="..\images\小程序\9.png" style="zoom:90%;" />
</li>
<li><p>还要在app.json文件里声明分包结构（类似vue中的路由）</p>
<p>可以看到subPackages的值是一个数组，说明可以设置多个分包，一个分包对应一个单独的文件夹，内部可以有多个页面。</p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">  <span class="attr">&quot;subPackages&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span></span><br><span class="line">    <span class="punctuation">&#123;</span></span><br><span class="line">      <span class="attr">&quot;root&quot;</span><span class="punctuation">:</span> <span class="string">&quot;subpkg&quot;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;name&quot;</span><span class="punctuation">:</span>&#x27;pkgA&#x27;<span class="punctuation">,</span><span class="comment">//分包别名</span></span><br><span class="line">      <span class="comment">//当前分包下所有页面的相对路径</span></span><br><span class="line">      <span class="attr">&quot;pages&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span></span><br><span class="line">        <span class="string">&quot;detail/detail&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="string">&quot;goods_list/goods_list&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="string">&quot;search/search&quot;</span></span><br><span class="line">      <span class="punctuation">]</span></span><br><span class="line">    <span class="punctuation">&#125;</span></span><br><span class="line">  <span class="punctuation">]</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure></li>
</ul>
<h3 id="打包原则"><a href="#打包原则" class="headerlink" title="打包原则"></a>打包原则</h3><ul>
<li>subpackages之外的目录将被打包到主包中</li>
<li>tabBar 页面必须在主包内</li>
<li>分包之间不能互相嵌套</li>
</ul>
<h3 id="引用原则"><a href="#引用原则" class="headerlink" title="引用原则"></a>引用原则</h3><ul>
<li>分包内的资源都是<code>私有</code>的，主包内的资源都是<code>共有</code>的</li>
<li>主包无法引用分包内的私有资源</li>
<li>分包之间不能相互引用私有资源</li>
<li>分包可以引用主包内的公共资源</li>
</ul>
<h3 id="独立分包"><a href="#独立分包" class="headerlink" title="独立分包"></a>独立分包</h3><p>普通分包打开依赖于主包，独立分包可以<strong>不依赖主包打开</strong>，独立分包在配置的时候需要额外添加<code>independent：true</code>属性</p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">  <span class="attr">&quot;subPackages&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span></span><br><span class="line">    <span class="punctuation">&#123;</span></span><br><span class="line">      <span class="attr">&quot;root&quot;</span><span class="punctuation">:</span> <span class="string">&quot;subpkg&quot;</span><span class="punctuation">,</span><span class="comment">//指明是项目根目录下的subpkg文件</span></span><br><span class="line">      <span class="attr">&quot;name&quot;</span><span class="punctuation">:</span>&#x27;pkgA&#x27;<span class="punctuation">,</span><span class="comment">//分包别名</span></span><br><span class="line">      <span class="comment">//设置独立分包</span></span><br><span class="line">      <span class="attr">&quot;independent&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">true</span></span> <span class="punctuation">,</span></span><br><span class="line">      <span class="comment">//当前分包下所有页面的相对路径</span></span><br><span class="line">      <span class="attr">&quot;pages&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span></span><br><span class="line">        <span class="string">&quot;detail/detail&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="string">&quot;goods_list/goods_list&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="string">&quot;search/search&quot;</span></span><br><span class="line">      <span class="punctuation">]</span></span><br><span class="line">    <span class="punctuation">&#125;</span></span><br><span class="line">  <span class="punctuation">]</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure>

<p>开发者可以按需，将某些具有一定<code>功能独立性</code>的页面配置到独立分包中，<strong>而独立分包不依赖主包即可运行</strong>，可以很大程度上提升分包页面的<code>启动速度</code>。</p>
<p>独立分包和普通分包以及主包之间，是相互隔绝的，不能相互引用彼此的资源，独立分包中<strong>不能引用主包内的公共资源</strong></p>
<img src="..\images\小程序\10.png" style="zoom:67%;" />

<h3 id="分包预下载"><a href="#分包预下载" class="headerlink" title="分包预下载"></a>分包预下载</h3><p>在进入小程序的某个<code>页面</code>时，由框架自动预下载<code>可能需要的分包</code>，从而提高进入后续分包的<code>启动速度</code></p>
<p>在app.json中配置:</p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">&quot;preloadRule&quot;</span><span class="punctuation">:</span><span class="punctuation">&#123;</span><span class="comment">//分包预下载规则</span></span><br><span class="line">	<span class="attr">&quot;pages/contact/contact&quot;</span><span class="punctuation">:</span><span class="punctuation">&#123;</span><span class="comment">//触发分包预下载的页面路径</span></span><br><span class="line">		<span class="attr">&quot;network&quot;</span><span class="punctuation">:</span><span class="string">&quot;all&quot;</span><span class="punctuation">,</span><span class="comment">//表示在指定的网络模式下下载，默认为wifi</span></span><br><span class="line">		<span class="attr">&quot;packages&quot;</span><span class="punctuation">:</span><span class="punctuation">[</span><span class="string">&quot;pkgA&quot;</span><span class="punctuation">]</span><span class="comment">//通过root或name指定预下载哪些分包</span></span><br><span class="line">    <span class="punctuation">&#125;</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure>

<p>同一个分包中的页面享有共同的预下载大小限额2M</p>
<h2 id="协同开发"><a href="#协同开发" class="headerlink" title="协同开发"></a>协同开发</h2><h3 id="小程序版本"><a href="#小程序版本" class="headerlink" title="小程序版本"></a>小程序版本</h3><p>上传代码，上传的代码为开发版本</p>
<p>提交审核，为审核版本</p>
<p>审核通过可以发布，为线上版本</p>
<h3 id="小程序推广"><a href="#小程序推广" class="headerlink" title="小程序推广"></a>小程序推广</h3><p>登录小程序管理后台→设置-&gt;基本设置→基本信息小程序码→及线下物料下载</p>
<h3 id="查看运营数据"><a href="#查看运营数据" class="headerlink" title="查看运营数据"></a>查看运营数据</h3><p>在后台统计查看，或者使用小程序数据助手。</p>
</article><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta"><i class="fas fa-circle-user fa-fw"></i>文章作者: </span><span class="post-copyright-info"><a href="https://www.sanye.blog">三叶sanye</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta"><i class="fas fa-square-arrow-up-right fa-fw"></i>文章链接: </span><span class="post-copyright-info"><a href="https://www.sanye.blog/posts/4618cb0a.html">https://www.sanye.blog/posts/4618cb0a.html</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta"><i class="fas fa-circle-exclamation fa-fw"></i>版权声明: </span><span class="post-copyright-info">本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" rel="external nofollow noreferrer" target="_blank">CC BY-NC-SA 4.0</a> 许可协议。转载请注明来源 <a href="https://www.sanye.blog" target="_blank">三叶的博客</a>！</span></div></div><div class="tag_share"><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/%E5%BE%AE%E4%BF%A1%E5%B0%8F%E7%A8%8B%E5%BA%8F/">微信小程序</a></div><div class="post-share"><div class="social-share" data-image="/images/cover/violet.png" data-sites="wechat,weibo,qq"></div><link rel="stylesheet" href="https://unpkg.com/butterfly-extsrc/sharejs/dist/css/share.min.css" media="print" onload="this.media='all'"><script src="https://unpkg.com/butterfly-extsrc/sharejs/dist/js/social-share.min.js" defer></script></div></div><nav class="pagination-post" id="pagination"><a class="pagination-related" href="/posts/e19785da.html" title="uniapp"><img class="cover" src="/images/cover/%E4%BA%91%E6%B9%96%E5%B0%91%E5%A5%B3.jpg" onerror="onerror=null;src='/img/404.jpg'" alt="cover of previous post"><div class="info"><div class="info-1"><div class="info-item-1">上一篇</div><div class="info-item-2">uniapp</div></div><div class="info-2"><div class="info-item-1"> 笔记内容主要参考uni-app官方文档，仔细阅读uni-app官方文档 介绍和教程等部分能获得更多内容。  什么是uni-app是一个使用 Vue.js 开发所有前端应用的框架，开发者编写一套代码，可发布到iOS、Android、Web（响应式）、以及各种小程快应用等多个平台。 uni-app的由来：uni-app官网 HBuilderXHBuilderX是通用的前端开发工具，但为uni-app做了特别强化，和uni-app属于同一家公司的产品。 基本配置 插件下载：工具-&gt;插件下载 快捷方式定制：工具-&gt;预定快捷方案 tab补全代码：工具-&gt;设置-&gt;语言服务配置 保存代码格式化：工具-&gt;设置-&gt;编辑器配置 合并代码时显示最后一行代码：工具-&gt;设置-&gt;编辑器配置  创建一个uni-app项目在点击工具栏里的文件 -&gt; 新建 -&gt; 项目 选择uni-app类型，输入工程名，选择模板，点击创建，即可成功创建。   uni-app自带的模板有默认的空项目模板、Hello uni-app...</div></div></div></a><a class="pagination-related" href="/posts/57064d90.html" title="编译原理期末速成"><img class="cover" src="/images/cover/%E7%BA%B8%E9%A3%9E%E6%9C%BA.png" onerror="onerror=null;src='/img/404.jpg'" alt="cover of next post"><div class="info text-right"><div class="info-1"><div class="info-item-1">下一篇</div><div class="info-item-2">编译原理期末速成</div></div><div class="info-2"><div class="info-item-1"> 个人观点:编译原理这门课的知识点是在是太抽象太晦涩，目前也想不出这门课的作用，以后也不会去写个编译器吧，未来找工作也大概率用不到，考研也不考，学的不扎实不用还会忘，争取会做题期末别挂就好，已经很不容易了🥲。   注意：若笔记中存在作者未发现的错误，望自行辨别😊  第一章：绪论翻译可分为编译和解释  编译： 程序到程序，把高级语言程序转换为低级语言程序 把源程序放入编译程序处理，得到目标代码  编译后如果能直接运行，说明编译得到的是机器代码(就是0101)  编译后如果生成的是汇编代码，还要经过汇编程序编译，得到机器代码    解释： 语句到语句，解释每一条语句并立马执行   我们重点要学习的就是编译程序，编译程序的构成包括，词法分析程序，语法分析程序，语义分析，中间代码生成，代码优化程序，目标代码生成。   简单的来说，编译过程可分为词法分析，语法分析，语义分析和中间代码生成，代码优化，目标代码生成 第二章：高级语言及其语法描述符号表，符号串 ∑ &#x3D; {a,b}；∑...</div></div></div></a></nav></div><div class="aside-content" id="aside-content"><div class="card-widget card-info text-center"><div class="avatar-img"><img src="/images/%E4%B8%89%E5%8F%B6.png" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"/></div><div class="author-info-name">三叶sanye</div><div class="author-info-description">记录学习，分享知识</div><div class="site-data"><a href="/archives/"><div class="headline">文章</div><div class="length-num">20</div></a><a href="/tags/"><div class="headline">标签</div><div class="length-num">25</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">10</div></a></div><div class="card-info-social-icons"><a class="social-icon" href="https://space.bilibili.com/660655866?spm_id_from=333.1007.0.0" rel="external nofollow noreferrer" target="_blank" title="Bilibli"><i class="fa-brands fa-bilibili" style="color: #74C0FC;"></i></a><a class="social-icon" href="https://github.com/syhy" rel="external nofollow noreferrer" target="_blank" title="Github"><i class="fab fa-github" style="color: #24292e;"></i></a><a class="social-icon" href="mailto:3519450570@qq.com" rel="external nofollow noreferrer" target="_blank" title="Email"><i class="fas fa-envelope" style="color: #4a7dbe;"></i></a></div></div><div class="card-widget card-announcement"><div class="item-headline"><i class="fas fa-bullhorn fa-shake"></i><span>公告</span></div><div class="announcement_content">笔记主要自用，希望也能帮到你😀</div></div><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="item-headline"><i class="fas fa-stream"></i><span>目录</span><span class="toc-percentage"></span></div><div class="toc-content"><ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E8%AF%B4%E8%AF%B4%E4%BD%A0%E5%AF%B9%E5%BE%AE%E4%BF%A1%E5%B0%8F%E7%A8%8B%E5%BA%8F%E7%9A%84%E7%90%86%E8%A7%A3%EF%BC%9F%E4%BC%98%E7%BC%BA%E7%82%B9%EF%BC%9F"><span class="toc-number">1.</span> <span class="toc-text">说说你对微信小程序的理解？优缺点？</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%98%AF%E4%BB%80%E4%B9%88"><span class="toc-number">1.1.</span> <span class="toc-text">是什么</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%83%8C%E6%99%AF"><span class="toc-number">1.2.</span> <span class="toc-text">背景</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BC%98%E7%BC%BA%E7%82%B9"><span class="toc-number">1.3.</span> <span class="toc-text">优缺点</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E8%AF%B4%E8%AF%B4%E5%BE%AE%E4%BF%A1%E5%B0%8F%E7%A8%8B%E5%BA%8F%E7%9A%84%E5%AE%9E%E7%8E%B0%E5%8E%9F%E7%90%86%EF%BC%9F"><span class="toc-number">2.</span> <span class="toc-text">说说微信小程序的实现原理？</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%83%8C%E6%99%AF-1"><span class="toc-number">2.1.</span> <span class="toc-text">背景</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#WebView-%E6%98%AF%E4%BB%80%E4%B9%88"><span class="toc-number">2.2.</span> <span class="toc-text">WebView 是什么</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E9%80%9A%E4%BF%A1"><span class="toc-number">2.3.</span> <span class="toc-text">通信</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%BF%90%E8%A1%8C%E6%9C%BA%E5%88%B6"><span class="toc-number">2.4.</span> <span class="toc-text">运行机制</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%BF%AB%E9%80%9F%E5%BC%80%E5%A7%8B"><span class="toc-number">3.</span> <span class="toc-text">快速开始</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E9%A1%B9%E7%9B%AE%E7%BB%93%E6%9E%84%E6%A6%82%E8%BF%B0"><span class="toc-number">4.</span> <span class="toc-text">项目结构概述</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#JSON%E6%96%87%E4%BB%B6%E6%80%BB%E7%BB%93"><span class="toc-number">5.</span> <span class="toc-text">JSON文件总结</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#app-json"><span class="toc-number">5.1.</span> <span class="toc-text">app.json</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#window"><span class="toc-number">5.1.1.</span> <span class="toc-text">window</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#tabBar"><span class="toc-number">5.1.2.</span> <span class="toc-text">tabBar</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E9%A1%B5%E9%9D%A2%E7%9A%84json%E6%96%87%E4%BB%B6"><span class="toc-number">5.2.</span> <span class="toc-text">页面的json文件</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#project-config-json"><span class="toc-number">5.3.</span> <span class="toc-text">project.config.json</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#sitemap-json"><span class="toc-number">5.4.</span> <span class="toc-text">sitemap.json</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#js%E6%96%87%E4%BB%B6%E6%80%BB%E7%BB%93"><span class="toc-number">6.</span> <span class="toc-text">js文件总结</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#app-js"><span class="toc-number">6.1.</span> <span class="toc-text">app.js</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E9%A1%B5%E9%9D%A2%E7%9A%84-js-%E6%96%87%E4%BB%B6"><span class="toc-number">6.2.</span> <span class="toc-text">页面的.js 文件</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#api"><span class="toc-number">7.</span> <span class="toc-text">api</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BA%8B%E4%BB%B6%E7%9B%91%E5%90%AC"><span class="toc-number">7.1.</span> <span class="toc-text">事件监听</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%90%8C%E6%AD%A5api"><span class="toc-number">7.2.</span> <span class="toc-text">同步api</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%BC%82%E6%AD%A5api"><span class="toc-number">7.3.</span> <span class="toc-text">异步api</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%9F%BA%E7%A1%80%E8%AF%AD%E6%B3%95"><span class="toc-number">8.</span> <span class="toc-text">基础语法</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BA%8B%E4%BB%B6"><span class="toc-number">8.1.</span> <span class="toc-text">事件</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%95%B0%E6%8D%AE%E7%BB%91%E5%AE%9A"><span class="toc-number">8.2.</span> <span class="toc-text">数据绑定</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%9D%A1%E4%BB%B6%E6%B8%B2%E6%9F%93"><span class="toc-number">8.3.</span> <span class="toc-text">条件渲染</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%88%97%E8%A1%A8%E6%B8%B2%E6%9F%93"><span class="toc-number">8.4.</span> <span class="toc-text">列表渲染</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#wxml%E4%B8%8Ehtml%E7%9A%84%E5%8C%BA%E5%88%AB"><span class="toc-number">8.5.</span> <span class="toc-text">wxml与html的区别</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#wxss%E4%B8%8Ecss%E7%9A%84%E5%8C%BA%E5%88%AB"><span class="toc-number">8.6.</span> <span class="toc-text">wxss与css的区别</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#wxs%E4%B8%8Ejs%E7%9A%84%E5%8C%BA%E5%88%AB"><span class="toc-number">8.7.</span> <span class="toc-text">wxs与js的区别</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%BB%84%E4%BB%B6"><span class="toc-number">8.8.</span> <span class="toc-text">组件</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E8%A7%86%E5%9B%BE%E7%BB%84%E4%BB%B6"><span class="toc-number">8.8.1.</span> <span class="toc-text">视图组件</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%85%B6%E4%BB%96%E7%BB%84%E4%BB%B6"><span class="toc-number">8.8.2.</span> <span class="toc-text">其他组件</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%95%B0%E6%8D%AE%E8%AF%B7%E6%B1%82"><span class="toc-number">8.9.</span> <span class="toc-text">数据请求</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%AF%BC%E8%88%AA"><span class="toc-number">8.10.</span> <span class="toc-text">导航</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%A3%B0%E6%98%8E%E5%BC%8F%E5%AF%BC%E8%88%AA"><span class="toc-number">8.10.1.</span> <span class="toc-text">声明式导航</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E7%BC%96%E7%A8%8B%E5%BC%8F%E5%AF%BC%E8%88%AA"><span class="toc-number">8.10.2.</span> <span class="toc-text">编程式导航</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%AF%BC%E8%88%AA%E4%BC%A0%E5%8F%82"><span class="toc-number">8.10.3.</span> <span class="toc-text">导航传参</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%8E%A5%E6%94%B6%E5%8F%82%E6%95%B0"><span class="toc-number">8.10.4.</span> <span class="toc-text">接收参数</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%B8%8B%E6%8B%89%E5%88%B7%E6%96%B0-%E8%A7%A6%E5%BA%95%E5%8A%A0%E8%BD%BD"><span class="toc-number">8.11.</span> <span class="toc-text">下拉刷新 触底加载</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%87%AA%E5%AE%9A%E4%B9%89%E7%BC%96%E8%AF%91%E6%A8%A1%E5%BC%8F"><span class="toc-number">8.12.</span> <span class="toc-text">自定义编译模式</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E8%87%AA%E5%AE%9A%E4%B9%89%E7%BB%84%E4%BB%B6"><span class="toc-number">9.</span> <span class="toc-text">自定义组件</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%BC%95%E7%94%A8"><span class="toc-number">9.1.</span> <span class="toc-text">引用</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%BB%84%E4%BB%B6%E5%92%8C%E9%A1%B5%E9%9D%A2%E7%9A%84%E5%8C%BA%E5%88%AB"><span class="toc-number">9.2.</span> <span class="toc-text">组件和页面的区别</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%A0%B7%E5%BC%8F%E5%8D%95%E5%90%91%E9%9A%94%E7%A6%BB"><span class="toc-number">9.3.</span> <span class="toc-text">样式单向隔离</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E8%87%AA%E5%AE%9A%E4%B9%89tabbar"><span class="toc-number">10.</span> <span class="toc-text">自定义tabbar</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%88%86%E5%8C%85"><span class="toc-number">11.</span> <span class="toc-text">分包</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%AE%9A%E4%B9%89"><span class="toc-number">11.1.</span> <span class="toc-text">定义</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%BB%93%E6%9E%84"><span class="toc-number">11.2.</span> <span class="toc-text">结构</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%88%86%E5%8C%85%E7%9A%84%E5%8A%A0%E8%BD%BD%E8%A7%84%E5%88%99"><span class="toc-number">11.3.</span> <span class="toc-text">分包的加载规则</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BD%93%E7%A7%AF%E9%99%90%E5%88%B6"><span class="toc-number">11.4.</span> <span class="toc-text">体积限制</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E9%85%8D%E7%BD%AE%E8%A7%84%E5%88%99"><span class="toc-number">11.5.</span> <span class="toc-text">配置规则</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%89%93%E5%8C%85%E5%8E%9F%E5%88%99"><span class="toc-number">11.6.</span> <span class="toc-text">打包原则</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%BC%95%E7%94%A8%E5%8E%9F%E5%88%99"><span class="toc-number">11.7.</span> <span class="toc-text">引用原则</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%8B%AC%E7%AB%8B%E5%88%86%E5%8C%85"><span class="toc-number">11.8.</span> <span class="toc-text">独立分包</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%88%86%E5%8C%85%E9%A2%84%E4%B8%8B%E8%BD%BD"><span class="toc-number">11.9.</span> <span class="toc-text">分包预下载</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%8D%8F%E5%90%8C%E5%BC%80%E5%8F%91"><span class="toc-number">12.</span> <span class="toc-text">协同开发</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%B0%8F%E7%A8%8B%E5%BA%8F%E7%89%88%E6%9C%AC"><span class="toc-number">12.1.</span> <span class="toc-text">小程序版本</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%B0%8F%E7%A8%8B%E5%BA%8F%E6%8E%A8%E5%B9%BF"><span class="toc-number">12.2.</span> <span class="toc-text">小程序推广</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%9F%A5%E7%9C%8B%E8%BF%90%E8%90%A5%E6%95%B0%E6%8D%AE"><span class="toc-number">12.3.</span> <span class="toc-text">查看运营数据</span></a></li></ol></li></ol></div></div><div class="card-widget card-recent-post"><div class="item-headline"><i class="fas fa-history"></i><span>最新文章</span></div><div class="aside-list"><div class="aside-list-item"><a class="thumbnail" href="/posts/518e617c.html" title="git"><img src="/images/cover/dog.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="git"/></a><div class="content"><a class="title" href="/posts/518e617c.html" title="git">git</a><time datetime="2025-02-09T08:07:36.000Z" title="发表于 2025-02-09 16:07:36">2025-02-09</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/posts/e255a10a.html" title="计算机网络"><img src="/images/cover/maomao.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="计算机网络"/></a><div class="content"><a class="title" href="/posts/e255a10a.html" title="计算机网络">计算机网络</a><time datetime="2025-02-07T15:08:21.000Z" title="发表于 2025-02-07 23:08:21">2025-02-07</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/posts/4b0178e0.html" title="数据结构与算法"><img src="/images/cover/%E7%A7%98%E5%AF%86%E9%A3%8E%E6%99%AF.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="数据结构与算法"/></a><div class="content"><a class="title" href="/posts/4b0178e0.html" title="数据结构与算法">数据结构与算法</a><time datetime="2025-02-07T14:48:29.000Z" title="发表于 2025-02-07 22:48:29">2025-02-07</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/posts/d04bd5bc.html" title="操作系统"><img src="/images/cover/%E6%98%9F%E7%A9%BA.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="操作系统"/></a><div class="content"><a class="title" href="/posts/d04bd5bc.html" title="操作系统">操作系统</a><time datetime="2025-02-06T15:49:56.000Z" title="发表于 2025-02-06 23:49:56">2025-02-06</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/posts/8b27fabc.html" title="vue"><img src="/images/cover/preview.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="vue"/></a><div class="content"><a class="title" href="/posts/8b27fabc.html" title="vue">vue</a><time datetime="2025-01-25T14:00:18.000Z" title="发表于 2025-01-25 22:00:18">2025-01-25</time></div></div></div></div></div></div></main><footer id="footer" style="background-image: url(/images/cover/1.png);"><div id="footer-wrap"><div class="footer_custom_text"><div id="sanye"><svg class="icon" aria-hidden="true"><use href="#icon-banquan"></use></svg><span>2024 - 2025 By 三叶sanye</span><svg class="icon" aria-hidden="true"><use href="#icon-sanyecao"></use></svg></div><div id="runtime"></div></div></div></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="阅读模式"><i class="fas fa-book-open"></i></button><button id="translateLink" type="button" title="简繁转换">繁</button><button id="darkmode" type="button" title="日间和夜间模式切换"><i class="fas fa-adjust"></i></button><button id="hide-aside-btn" type="button" title="单栏和双栏切换"><i class="fas fa-arrows-alt-h"></i></button></div><div id="rightside-config-show"><button id="rightside-config" type="button" title="设置"><i class="fas fa-cog fa-spin"></i></button><button class="close" id="mobile-toc-button" type="button" title="目录"><i class="fas fa-list-ul"></i></button><button id="go-up" type="button" title="回到顶部"><span class="scroll-percent"></span><i class="fas fa-arrow-up"></i></button></div></div><div><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="/js/tw_cn.js"></script><script src="https://unpkg.com/node-snackbar/dist/snackbar.min.js"></script><div class="js-pjax"></div><script src="/js/time.js"></script><script src="/js/iconfont.js"></script><script defer="defer" id="ribbon" src="https://unpkg.com/butterfly-extsrc/dist/canvas-ribbon.min.js" size="150" alpha="0.6" zIndex="-1" mobile="false" data-click="false"></script><script src="https://unpkg.com/butterfly-extsrc/dist/activate-power-mode.min.js"></script><script>POWERMODE.colorful = true;
POWERMODE.shake = true;
POWERMODE.mobile = false;
document.body.addEventListener('input', POWERMODE);
</script><script id="click-heart" src="https://unpkg.com/butterfly-extsrc/dist/click-heart.min.js" async="async" mobile="false"></script><script async data-pjax src="/js/busuanzi.js"></script><div id="local-search"><div class="search-dialog"><nav class="search-nav"><span class="search-dialog-title">搜索</span><span id="loading-status"></span><button class="search-close-button"><i class="fas fa-times"></i></button></nav><div class="text-center" id="loading-database"><i class="fas fa-spinner fa-pulse"></i><span>  数据加载中</span></div><div class="search-wrap"><div id="local-search-input"><div class="local-search-box"><input class="local-search-box--input" placeholder="搜索文章" type="text"/></div></div><hr/><div id="local-search-results"></div><div id="local-search-stats-wrap"></div></div></div><div id="search-mask"></div><script src="/js/search/local-search.js"></script></div></div><script src="/live2dw/lib/L2Dwidget.min.js?094cbace49a39548bed64abff5988b05"></script><script>L2Dwidget.init({"pluginRootPath":"live2dw/","pluginJsPath":"lib/","pluginModelPath":"assets/","tagMode":false,"log":false,"display":{"position":"left","width":120,"height":240},"mobile":{"show":true},"react":{"opacity":0.7}});</script></body></html>